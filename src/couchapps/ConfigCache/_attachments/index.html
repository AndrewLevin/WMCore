<!DOCTYPE html>
<html>
  <head>
    <title>Generated CouchApp</title>
    <link rel="stylesheet" href="style/main.css" type="text/css">
   
    <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/combo?2.8.1/build/datatable/assets/skins/sam/datatable.css&2.8.1/build/logger/assets/skins/sam/logger.css">
    <!-- Combo-handled YUI JS files: -->
    <script type="text/javascript" src="http://yui.yahooapis.com/combo?2.8.1/build/yahoo/yahoo-debug.js&2.8.1/build/dom/dom-debug.js&2.8.1/build/event/event-debug.js&2.8.1/build/element/element-debug.js&2.8.1/build/datasource/datasource-debug.js&2.8.1/build/datatable/datatable-debug.js&2.8.1/build/logger/logger-debug.js"></script>
    
  </head>
  <body class="yui-skin-sam">
    <h1>ConfigCache</h1>
    <h2><a href="tree.html">Tree View</a></h2>
    <div id="owners"></div>
    
  </body>
  <script src="/_utils/script/json2.js"></script>
  <script src="/_utils/script/jquery.js?1.3.1"></script>
  <script src="/_utils/script/jquery.couch.js?0.9.0"></script>
  
  
  <script>
     // Access the couch database
     $db = $.couch.db("configcache");
 
       
     // build a YUI DataTable to contain the owners in the owners id div in the markup
     YAHOO.util.Event.addListener(window, "load", function() {
        // column definition
        var myColumnDefs = [
            {key:"username" , resizeable:true,sortable:true},
            {key:"group",resizeable:true, sortable:true}
        ];

        // backend data source for the table is a JavaScript array that starts empty
        var myDataSource = new YAHOO.util.DataSource([]);
        myDataSource.responseType = YAHOO.util.DataSource.TYPE_JSARRAY;
        myDataSource.responseSchema = {
            fields: ["username","group"]
        };
        
        // the actual table
        var myDataTable = new YAHOO.widget.DataTable("owners",
                myColumnDefs, myDataSource, {});
        
        // load the owner_name_group view from couch and add the rows in it to the table
        $db.view("ConfigCache/owner_name_group", 
            {  success: function(data) { 
               for (i in data.rows) {  
                  myDataTable.addRow({"username": data.rows[i].key[0], "group": data.rows[i].key[1]})
               }
            } // end of success function def 
        });
       }
    );

   
     
  </script>
  
</html>
