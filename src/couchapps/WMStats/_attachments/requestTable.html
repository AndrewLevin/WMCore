<html>
  <head>
    <title>WMStats</title>
    <style type="text/css" title="currentStyle">
            @import "css/demo_table.css";
    </style>
    <script src="lib/namespace.js" type='text/javascript'> </script>
    <script src="lib/jquery.js" type='text/javascript'> </script>
    <script src="lib/jquery.dataTables.js" type='text/javascript'> </script>
    <script src="js/dataMap.js" type='text/javascript'> </script>
    <script>
    
    
    var createRequestTable = function(selector, data) {
        var baseCols = ["campaign", "team", "type"]
        oTableConfig = WMStats.generateTableConfig(WMStats.convertToTableData(data, baseCols));
        var oTable = $(selector).dataTable(oTableConfig);
        return oTable;
    }
    
    var createRequestTable = function(reqmgrData) {
        var options = {'include_docs': true, 'keys': []}
        for (var i in reqmgrData.rows){
            options.keys.push([reqmgrData.rows[i].id, timestamp])
        }
        
        $.post('/wmstats/_design/WMStats/_view/time-request', options,
              function(response) {
                  
                  createRequestTable("#requestTable", response);
              },
              'json')
    }
      
    $(document).ready(function() {
          
        $('#requestDiv').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="requestTable"></table>' );
      
        $.get('/wmstats/_design/WMStats/_view/campaign-request', 'include_docs=true',
              function(response) {
                  
                  createCampaignTable("#campaignTable", response);
              },
              'json')
        
     } );
    </script>
<body>
    <div id="requestDiv"></div>
</body>